function draw_group_graph(e,i){function r(){var e=d3.svg.line().interpolate("linear").x(function(e){return d(s.parse(e.key))}).y(function(e){return c(e.values[0].key)});p.append("g").attr("class","x axis").attr("transform","translate(0,"+t+")").call(u),p.append("g").attr("class","y axis").call(n).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Score");var i=p.selectAll(".score").data(o).enter().append("g").attr("class","score").attr("transform","translate(277,0)").attr("id",function(e){return"score-"+e.key});i.append("path").attr("class","line").attr("d",function(i){return e(i.values)}).style("stroke",function(e){return N(e.key)})}var s=d3.time.format("%Y-%m-%d"),m={top:20,right:80,bottom:30,left:50},a=960-m.left-m.right,t=500-m.top-m.bottom,o=d3.nest().key(function(e){return e.id}).key(function(e){return s(new Date(e.time))}).key(function(e){return e.score}).entries(i);minDate=new Date,minDate.setDate(new Date(i[0].time).getDate()+1),maxDate=new Date,maxDate.setDate(new Date(i[i.length-1].time).getDate());var d=d3.time.scale().domain([minDate,maxDate]).nice(d3.time.day).range([0,a]),c=d3.scale.linear().domain([0,10]).range([t,0]),u=d3.svg.axis().scale(d).ticks(d3.time.days,0).tickFormat(s).orient("bottom"),n=d3.svg.axis().scale(c).orient("left"),N=d3.scale.category10(),l="#"+e,p=d3.select(l).append("svg").attr("width",a+m.left+m.right).attr("height",t+m.top+m.bottom).append("g").attr("transform","translate("+m.left+","+m.top+")");r()}var user_dataset=[{id:110,time:"2013-10-12",score:4,userName:"Alice"},{id:110,time:"2013-10-13",score:10,userName:"Alice"},{id:110,time:"2013-10-14",score:6,userName:"Alice"},{id:110,time:"2013-10-15",score:4,userName:"Alice"}],admin_group_dataset=[{id:110,time:"2013-10-12",score:4,userName:"Alice"},{id:115,time:"2013-10-12",score:3,userName:"Clyde"},{id:111,time:"2013-10-12",score:5,userName:"Bob"},{id:110,time:"2013-10-13",score:10,userName:"Alice"},{id:115,time:"2013-10-13",score:7,userName:"Clyde"},{id:111,time:"2013-10-13",score:9,userName:"Bob"},{id:110,time:"2013-10-14",score:6,userName:"Alice"},{id:115,time:"2013-10-14",score:10,userName:"Clyde"},{id:111,time:"2013-10-14",score:2,userName:"Bob"},{id:110,time:"2013-10-15",score:4,userName:"Alice"},{id:115,time:"2013-10-15",score:7,userName:"Clyde"},{id:111,time:"2013-10-15",score:8,userName:"Bob"}],blue_group_dataset=[{id:1,time:"2013-10-12",score:4,userName:"Alice"},{id:2,time:"2013-10-12",score:3,userName:"Clyde"},{id:3,time:"2013-10-12",score:5,userName:"Bob"},{id:4,time:"2013-10-12",score:10,userName:"Roger"},{id:5,time:"2013-10-12",score:7,userName:"Simon"},{id:6,time:"2013-10-12",score:9,userName:"Dan"},{id:7,time:"2013-10-12",score:6,userName:"Jim"},{id:8,time:"2013-10-12",score:10,userName:"Stephanie"},{id:9,time:"2013-10-12",score:2,userName:"Brian"},{id:1,time:"2013-10-13",score:8,userName:"Alice"},{id:2,time:"2013-10-13",score:8,userName:"Clyde"},{id:3,time:"2013-10-13",score:2,userName:"Bob"},{id:4,time:"2013-10-13",score:3,userName:"Roger"},{id:5,time:"2013-10-13",score:6,userName:"Simon"},{id:6,time:"2013-10-13",score:5,userName:"Dan"},{id:7,time:"2013-10-13",score:7,userName:"Jim"},{id:8,time:"2013-10-13",score:10,userName:"Stephanie"},{id:9,time:"2013-10-13",score:4,userName:"Brian"},{id:1,time:"2013-10-14",score:9,userName:"Alice"},{id:2,time:"2013-10-14",score:2,userName:"Clyde"},{id:3,time:"2013-10-14",score:7,userName:"Bob"},{id:4,time:"2013-10-14",score:9,userName:"Roger"},{id:5,time:"2013-10-14",score:9,userName:"Simon"},{id:6,time:"2013-10-14",score:6,userName:"Dan"},{id:7,time:"2013-10-14",score:8,userName:"Jim"},{id:8,time:"2013-10-14",score:4,userName:"Stephanie"},{id:9,time:"2013-10-14",score:6,userName:"Brian"},{id:1,time:"2013-10-15",score:5,userName:"Alice"},{id:2,time:"2013-10-15",score:3,userName:"Clyde"},{id:3,time:"2013-10-15",score:8,userName:"Bob"},{id:4,time:"2013-10-15",score:7,userName:"Roger"},{id:5,time:"2013-10-15",score:5,userName:"Simon"},{id:6,time:"2013-10-15",score:7,userName:"Dan"},{id:7,time:"2013-10-15",score:9,userName:"Jim"},{id:8,time:"2013-10-15",score:5,userName:"Stephanie"},{id:9,time:"2013-10-15",score:6,userName:"Brian"}],green_group_dataset=[{id:1,time:"2013-10-12",score:4,userName:"Alice"},{id:2,time:"2013-10-12",score:3,userName:"Clyde"},{id:3,time:"2013-10-12",score:5,userName:"Bob"},{id:4,time:"2013-10-12",score:10,userName:"Roger"},{id:5,time:"2013-10-12",score:7,userName:"Simon"},{id:6,time:"2013-10-12",score:9,userName:"Dan"},{id:7,time:"2013-10-12",score:6,userName:"Jim"},{id:8,time:"2013-10-12",score:10,userName:"Stephanie"},{id:9,time:"2013-10-12",score:2,userName:"Brian"},{id:10,time:"2013-10-12",score:5,userName:"Hank"},{id:1,time:"2013-10-13",score:8,userName:"Alice"},{id:2,time:"2013-10-13",score:8,userName:"Clyde"},{id:3,time:"2013-10-13",score:2,userName:"Bob"},{id:4,time:"2013-10-13",score:3,userName:"Roger"},{id:5,time:"2013-10-13",score:6,userName:"Simon"},{id:6,time:"2013-10-13",score:5,userName:"Dan"},{id:7,time:"2013-10-13",score:7,userName:"Jim"},{id:8,time:"2013-10-13",score:10,userName:"Stephanie"},{id:9,time:"2013-10-13",score:4,userName:"Brian"},{id:10,time:"2013-10-13",score:7,userName:"Hank"},{id:1,time:"2013-10-14",score:9,userName:"Alice"},{id:2,time:"2013-10-14",score:2,userName:"Clyde"},{id:3,time:"2013-10-14",score:7,userName:"Bob"},{id:4,time:"2013-10-14",score:9,userName:"Roger"},{id:5,time:"2013-10-14",score:9,userName:"Simon"},{id:6,time:"2013-10-14",score:6,userName:"Dan"},{id:7,time:"2013-10-14",score:8,userName:"Jim"},{id:8,time:"2013-10-14",score:4,userName:"Stephanie"},{id:9,time:"2013-10-14",score:6,userName:"Brian"},{id:10,time:"2013-10-14",score:8,userName:"Hank"},{id:1,time:"2013-10-15",score:5,userName:"Alice"},{id:2,time:"2013-10-15",score:3,userName:"Clyde"},{id:3,time:"2013-10-15",score:8,userName:"Bob"},{id:4,time:"2013-10-15",score:7,userName:"Roger"},{id:5,time:"2013-10-15",score:5,userName:"Simon"},{id:6,time:"2013-10-15",score:7,userName:"Dan"},{id:7,time:"2013-10-15",score:9,userName:"Jim"},{id:8,time:"2013-10-15",score:5,userName:"Stephanie"},{id:9,time:"2013-10-15",score:6,userName:"Brian"},{id:10,time:"2013-10-15",score:6,userName:"Hank"}],red_group_dataset=[{id:1,time:"2013-10-12",score:4,userName:"Alice"},{id:2,time:"2013-10-12",score:3,userName:"Clyde"},{id:3,time:"2013-10-12",score:5,userName:"Bob"},{id:4,time:"2013-10-12",score:10,userName:"Roger"},{id:5,time:"2013-10-12",score:7,userName:"Simon"},{id:6,time:"2013-10-12",score:9,userName:"Dan"},{id:7,time:"2013-10-12",score:6,userName:"Jim"},{id:1,time:"2013-10-13",score:8,userName:"Alice"},{id:2,time:"2013-10-13",score:8,userName:"Clyde"},{id:3,time:"2013-10-13",score:2,userName:"Bob"},{id:4,time:"2013-10-13",score:3,userName:"Roger"},{id:5,time:"2013-10-13",score:6,userName:"Simon"},{id:6,time:"2013-10-13",score:5,userName:"Dan"},{id:7,time:"2013-10-13",score:7,userName:"Jim"},{id:1,time:"2013-10-14",score:9,userName:"Alice"},{id:2,time:"2013-10-14",score:2,userName:"Clyde"},{id:3,time:"2013-10-14",score:7,userName:"Bob"},{id:4,time:"2013-10-14",score:9,userName:"Roger"},{id:5,time:"2013-10-14",score:9,userName:"Simon"},{id:6,time:"2013-10-14",score:6,userName:"Dan"},{id:7,time:"2013-10-14",score:8,userName:"Jim"},{id:1,time:"2013-10-15",score:5,userName:"Alice"},{id:2,time:"2013-10-15",score:3,userName:"Clyde"},{id:3,time:"2013-10-15",score:8,userName:"Bob"},{id:4,time:"2013-10-15",score:7,userName:"Roger"},{id:5,time:"2013-10-15",score:5,userName:"Simon"},{id:6,time:"2013-10-15",score:7,userName:"Dan"},{id:7,time:"2013-10-15",score:9,userName:"Jim"}],purple_group_dataset=[{id:1,time:"2013-10-12",score:4,userName:"Alice"},{id:2,time:"2013-10-12",score:3,userName:"Clyde"},{id:3,time:"2013-10-12",score:5,userName:"Bob"},{id:4,time:"2013-10-12",score:10,userName:"Roger"},{id:5,time:"2013-10-12",score:7,userName:"Simon"},{id:6,time:"2013-10-12",score:9,userName:"Dan"},{id:7,time:"2013-10-12",score:6,userName:"Jim"},{id:8,time:"2013-10-12",score:10,userName:"Stephanie"},{id:9,time:"2013-10-12",score:2,userName:"Brian"},{id:10,time:"2013-10-12",score:5,userName:"Hank"},{id:1,time:"2013-10-13",score:8,userName:"Alice"},{id:2,time:"2013-10-13",score:8,userName:"Clyde"},{id:3,time:"2013-10-13",score:2,userName:"Bob"},{id:4,time:"2013-10-13",score:3,userName:"Roger"},{id:5,time:"2013-10-13",score:6,userName:"Simon"},{id:6,time:"2013-10-13",score:5,userName:"Dan"},{id:7,time:"2013-10-13",score:7,userName:"Jim"},{id:8,time:"2013-10-13",score:10,userName:"Stephanie"},{id:9,time:"2013-10-13",score:4,userName:"Brian"},{id:10,time:"2013-10-13",score:7,userName:"Hank"},{id:1,time:"2013-10-14",score:9,userName:"Alice"},{id:2,time:"2013-10-14",score:2,userName:"Clyde"},{id:3,time:"2013-10-14",score:7,userName:"Bob"},{id:4,time:"2013-10-14",score:9,userName:"Roger"},{id:5,time:"2013-10-14",score:9,userName:"Simon"},{id:6,time:"2013-10-14",score:6,userName:"Dan"},{id:7,time:"2013-10-14",score:8,userName:"Jim"},{id:8,time:"2013-10-14",score:4,userName:"Stephanie"},{id:9,time:"2013-10-14",score:6,userName:"Brian"},{id:10,time:"2013-10-14",score:8,userName:"Hank"},{id:1,time:"2013-10-15",score:5,userName:"Alice"},{id:2,time:"2013-10-15",score:3,userName:"Clyde"},{id:3,time:"2013-10-15",score:8,userName:"Bob"},{id:4,time:"2013-10-15",score:7,userName:"Roger"},{id:5,time:"2013-10-15",score:5,userName:"Simon"},{id:6,time:"2013-10-15",score:7,userName:"Dan"},{id:7,time:"2013-10-15",score:9,userName:"Jim"},{id:8,time:"2013-10-15",score:5,userName:"Stephanie"},{id:9,time:"2013-10-15",score:6,userName:"Brian"},{id:10,time:"2013-10-15",score:6,userName:"Hank"}];$(document).ready(function(){$("#user-home-page").empty(),draw_group_graph("user-home-page",user_dataset),$(function(){$("#datepicker").datepicker()}),$(".send-msg-to-group").click(function(){return $("#lC").addClass("active"),$("#lA").removeClass("active"),$("#home").removeClass("active"),$("#msg-tab").addClass("active"),!1}),$("#lB").empty(),$("#lB").append("<h3>Average Mood of Each Group</h3><p></p>"),draw_group_graph("lB",admin_group_dataset),$(".group-mood").click(function(){var e=$(this).data("name").split(" ")[0],i=$(this).data("activemembers");$(this).data("inactive"),$("#B").show(),$("#B").empty(),$("#A").hide();var r=[];"Blue"===e?r=blue_group_dataset:"Green"===e?r=green_group_dataset:"Red"===e?r=red_group_dataset:"Purple"===e&&(r=purple_group_dataset);for(var s="",m=0;m<r.length/4;m++)s+="<div class='row-fluid'><div class='span3'><img class='centered' src='/assets/fake_user_small.png'></div> <div class='span9'><h5>"+r[m].userName+"</h5></div> </div> ";return $("#B").append("<h3>"+e+" Group</h3><div class='row-fluid'><div class='span9'><div id='"+e+"'></div><button class='btn send-msg-to-this-group'>New Message</button> <div><h4>Scheduled Messages</h4><ul><li>Friday 10am : How are you?</li><li>Friday 4pm : Are you looking forward to the weekend?</li><li>Saturday 10am : How was your week?</li></ul></div></div> <div id='member-names' class='span2'><div class='lead'>Members ("+i+")</div><ul id='members-list'><li><div class='container-fluid'>"+s+"</div> </li></ul><div class='row-fluid'><div class='span12'></div> </div> </div> </div> </div>"),draw_group_graph(e,r),$("#home").click(function(){$("#B").empty(),$("#A").show()}),$(".send-msg-to-this-group").click(function(){return $("#lC").addClass("active"),$("#lA").removeClass("active"),$("#home").removeClass("active"),$("#msg-tab").addClass("active"),!1}),!1})});