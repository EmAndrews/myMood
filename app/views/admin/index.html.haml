%html

  %head
    -#%meta{ name: 'viewport', content: 'width=device-width, initial-scale=1.0'}
    -#%title My Mood
    -#
    -#= stylesheet_link_tag 'bootstrap.min'
    -#= stylesheet_link_tag 'index'
    -#= stylesheet_link_tag 'bootstrap-responsive.min'
    -#= stylesheet_link_tag 'jquery-ui'

  %body
    %div.navbar.navbar-inverse.navbar-fixed-top
      %div.navbar-inner
        %div.container-fluid
          %div.brand MyMood
          %ul.nav
            %li.divider-vertical
            %li <a href="#">Home</a>
            %li.divider-vertical
            -#%li <a href="#">Settings</a>
          %ul.nav.pull-right
            %li.divider-vertical
            %li
              = link_to('Logout', destroy_user_session_path, :method => :delete)

    %div.container-fluid.content
      %div#homepage-content
        %div.row-fluid.opaque
          - flash.each do |name, msg|
            -#- if msg.eql?('You have successfully subscribed to new categories!')
            -#  %script
            -#    $('#homepage-content').hide();
            -#    $('#settings-content').attr('display', 'block');
            -#- elsif name.eql?(:notice) && !msg.eql?('Signed in successfully.')
            - if name.eql?(:notice) && !msg.eql?('Signed in successfully.')
              %div.span10.offset1.well#notice{:style => 'padding-top: 13px; padding-bottom: 13px'}
                %h4.message= msg
                %button.btn.status-button{:style => 'margin-top: 5px; margin-left: 10px'} Ok
            - elsif !msg.eql?('You are already signed in.') && name.eql?(:alert)
              %div.span10.offset1.well#alert{:style => 'padding-top: 13px; padding-bottom: 13px'}
                %h4.message= msg
                %button.btn.status-button{:style => 'margin-top: 5px; margin-left: 10px; float: left'} Ok
                %button.btn#failed-change{:style => 'margin-top: 5px; margin-left: 10px'} Go Back to settings
        %div.row-fluid.opaque
          %div.span5.offset1
            %h3 Average Graphs for All Users
            %div#carousel.carousel.slide
              %div.carousel-inner
                %div.active.item#line-graph
                %div.item#pie-chart
              %a.carousel-control.left#prev{'data-slide' => 'prev', href: '#carousel'} ‹
              %a.carousel-control.right#next{'data-slide' => 'next', href: '#carousel'} ›
          %div.span5
            %div.row-fluid
              %h3 Categories
              %div#categories.span12.well
                %table.table.table-striped.table-hover
                  %tr
                    %th Name
                    %th Prefix
                    %th Delete
                  - @categories.each do |category|
                    %tr
                      %td= category.name
                      - if category.prefix
                        %td= category.prefix
                      - else
                        %td No Prefix
                      %td
                        = form_tag admin_path, :method => :delete do
                          -# HACK HACK FIX ME THIS DOESN'T WORK PROPERLY
                          = hidden_field :category_id, category.id
                          = submit_tag '×', :class => 'delete-btn'
                %a.btn{'data-toggle' => 'modal', href: '#addCategoryModal', role: 'button'} Add new category
        %div.row-fluid
          %div.span10.offset1
            %h3 Messages
            %div#messages.well
              %table.table.table-striped.table-hover
                %tr
                  %th Message
                  %th Category
                  %th Delete
                - @messages.each do |message|
                  %tr
                    %td= message.text
                    - if message.category
                      %td= message.category.name
                    - else
                      %td No Category
                    %td
                      = form_tag admin_path, :method => :delete do
                        -# HACK HACK FIX ME THIS DOESN'T WORK PROPERLY
                        = hidden_field :message_id, message.id
                        = submit_tag '×', :class => 'delete-btn'
              %a.btn{'data-toggle' => 'modal', href: '#addMessageModal', role: 'button'} Add new message



      -#%div#settings-content
      -#  %div.row-fluid.opaque
      -#    %div.span5.offset1
      -#      %h3.title-against-dark-bg User Settings
      -#      %div.well.settings
      -#        = form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f|
      -#          = devise_error_messages!
      -#          %div
      -#            = f.label 'New Password'
      -#            %i (leave blank if you don't want to change it)
      -#            %br
      -#            = f.password_field :password, :autocomplete => 'off'
      -#          %div
      -#            = f.label :password_confirmation
      -#            = f.password_field :password_confirmation
      -#          %div
      -#            = f.label :current_password
      -#            %i (we need your current password to confirm your changes)
      -#            = f.password_field :current_password
      -#          %div= f.submit 'Save'
      -#        %p
      -#          #{button_to 'Cancel my account', registration_path(resource_name), :data => { :confirm => 'Are you sure?' }, :method => :delete}
      -#        = link_to 'Back', :back
      -#    %div.span5
      -#      %h3.title-against-dark-bg Admins
      -#      %div.well.settings
      -#        -#= flash[:notice]
      -#        -#%h4 Categories:
      -#        -#= form_tag profile_path, :method => :put do
      -#        -#  - @categories.each do |cat|
      -#        -#    = check_box_tag 'category_id[]',cat.id, @subscribed_categories.include?(cat.id.to_s)
      -#        -#    = cat.name
      -#        -#    %br
      -#        -#  = submit_tag 'Subscribe', :id => 'subscribe'
      -#        -#%h4 Schedule Preferences
      -#        -#= form_tag profile_path, :method => :put do
      -#        -#  - @days.each do |day|
      -#        -#    = day
      -#        -#    = check_box_tag 'days[]', "#{day}", @subscribed_days.include?(day)
      -#        -#  = submit_tag 'Update', :id => 'availability'


    #addCategoryModal.modal.hide.fade{'aria-hidden' => 'true', 'aria-labelledby' => 'addCategoryModalLabel', role: 'dialog', tabindex: '-1'}
      .modal-header
        %button.close{'aria-hidden' => 'true', 'data-dismiss' => 'modal', type: 'button'} ×
        %h3#addCategoryModalLabel Add Category
      .modal-body
        = form_for admin_path do
          = label :category, :name, 'Category Name'
          = text_field :category, 'name'
          = label :category, :prefix, 'Category Prefix'
          = text_field :category, 'prefix'
          = submit_tag 'Add Category', :id => 'add-new-category'

    #addMessageModal.modal.hide.fade{'aria-hidden' => 'true', 'aria-labelledby' => 'addMessageModalLabel', role: 'dialog', tabindex: '-1'}
      .modal-header
        %button.close{'aria-hidden' => 'true', 'data-dismiss' => 'modal', type: 'button'} ×
        %h3#addMessageModalLabel Add Message
      .modal-body
        = form_tag admin_path do
          = label :message, :text, 'Message Text'
          = text_field :message, 'text', :required => 'true'
          = label :message, :category, 'Message Category'
          = select :message, :category, @categories.map{|c| [c.name, c.name]}, :required => 'true'
          = submit_tag 'Add Message', :id => 'add-new-message'